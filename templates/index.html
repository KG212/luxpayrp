<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>LuxPay Web</title>
  <link rel="stylesheet" href="/static/styles.css">
  <style>
    table { border-collapse: collapse; width: 80%; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f0f0f0; }
    caption { font-weight: bold; margin-bottom: 0.5rem; }
  </style>
</head>
<body>
  <h1>Salary Calculator (LuxPay)</h1>

  {% if error %}
    <div class="error">{{ error }}</div>
  {% endif %}

  <form method="POST" class="form-grid">
    <label>Gross salary (month)
      <input type="text" name="gross_salary" value="{{ request.form.gross_salary or '' }}" required>
    </label>

    <label>Company car benefit (month)
      <input type="text" name="car_cost" value="{{ request.form.car_cost or '' }}" required>
    </label>

    <label>Social class
      <select name="social_class" required>
        {% for sc in social_classes %}
          <option value="{{ sc }}"
            {% if request.form.social_class == sc %}selected{% endif %}>
            {{ sc }}
          </option>
        {% endfor %}
      </select>
    </label>

    <label>Residence
      <select name="residence" required>
        {% for city in residences %}
          <option value="{{ city }}"
            {% if request.form.residence == city %}selected{% endif %}>
            {{ city }}
          </option>
        {% endfor %}
      </select>
    </label>

    <button type="submit">Calculate</button>
    <button type="reset">Reset Form</button>
  </form>

  {% if result %}
    <h2>Results</h2>
    <table>
      <caption>Salary Breakdown</caption>
      <tr><th>Item</th><th>Value</th></tr>
      <tr><td>Total (month)</td><td>{{ result.total_month }}</td></tr>
      <tr><td>Total (year)</td><td>{{ result.total_year }}</td></tr>
      <tr><td>Assurance maladie</td><td>{{ result.assurance_maladie }}</td></tr>
      <tr><td>Assurance maladie espèce</td><td>{{ result.assurance_maladie_espece }}</td></tr>
      <tr><td>Assurance pension</td><td>{{ result.assurance_pension }}</td></tr>
      <tr><td>Cotisations totales</td><td>{{ result.cotisations_totales }}</td></tr>
      <tr><td>Frais de déplacement</td><td>{{ result.frais_deplacement }}</td></tr>
      <tr><td>Imposable</td><td>{{ result.imposable }}</td></tr>
      <tr><td>Assurance dépendance</td><td>{{ result.assurance_dependance }}</td></tr>
      <tr><td>CIS</td><td>{{ result.cis }}</td></tr>
      <tr><td>Impot</td><td>{{ result.impot }}</td></tr>
      <tr><td>Net</td><td>{{ result.net }}</td></tr>
      <tr><td>Ticket deduction</td><td>{{ result.deduc_ticket }}</td></tr>
      <tr><td>Car benefit</td><td>{{ result.car_cost }}</td></tr>
      <tr><td>Received salary (month)</td><td>{{ result.restant }}</td></tr>
      <tr><td>Received salary (year)</td><td>{{ result.restant_year }}</td></tr>
    </table>
  {% endif %}
</body>
</html>